{"ast":null,"code":"import _toConsumableArray from\"/home/guilherme/Projetos/projeto_09_cineflixReact/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/guilherme/Projetos/projeto_09_cineflixReact/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./styles.css\";import axios from\"axios\";import{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import Rodape from\"../Outros/Rodape/Rodape\";import Loading from\"../Outros/Loading/Loading\";import Titulo from\"../Outros/Titulo/Titulo\";import Cadeira from\"./Cadeira/Cadeira\";import Infos from\"./Infos/Infos\";import Dados from\"./Dados/Dados\";import Botao from\"../Outros/Botao/Botao\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Lugares(_ref){var setReservationData=_ref.setReservationData;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),lugaresDATA=_useState2[0],setLugaresData=_useState2[1];var _useParams=useParams(),assentosId=_useParams.assentosId;useEffect(function(){axios.get(\"https://mock-api.driven.com.br/api/v4/cineflex/showtimes/\".concat(assentosId,\"/seats\")).then(function(response){return setLugaresData(response.data);}).catch(function(error){return alert(error);});},[]);var navigate=useNavigate();var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),nameValue=_useState4[0],setNameValue=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),CPFValue=_useState6[0],SetCPFValue=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selectedSeats=_useState8[0],setSelectedSeats=_useState8[1];function toggleSelect(seatId){var newSelectedSeats=_toConsumableArray(selectedSeats);if(newSelectedSeats.includes(seatId)){newSelectedSeats.splice(newSelectedSeats.indexOf(seatId),1);}else{newSelectedSeats.push(seatId);}setSelectedSeats(newSelectedSeats);}function finish(){if(verifyInfo()){setReservationData({ids:selectedSeats,name:nameValue,cpf:CPFValue,movie:lugaresDATA.movie.title,date:lugaresDATA.day.date,showtime:lugaresDATA.name});navigate.push(\"/sucesso\");}}function verifyInfo(){if(nameValue&&CPFValue&&selectedSeats[0]!==undefined){return true;}return false;}if(lugaresDATA===null){return/*#__PURE__*/_jsx(Loading,{});}return/*#__PURE__*/_jsxs(\"article\",{className:\"lugares\",children:[/*#__PURE__*/_jsx(Titulo,{text:\"Selecione o(s) assento(s)\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"seats-box\",children:[lugaresDATA.seats.map(function(seat,i){return/*#__PURE__*/_jsx(Cadeira,{number:seat.name,isAvailable:seat.isAvailable,id:seat.id,toggleSelect:toggleSelect,isSelected:selectedSeats.includes(seat.id)},seat.id);}),/*#__PURE__*/_jsx(Infos,{})]}),/*#__PURE__*/_jsx(Dados,{title:\"nome\",value:nameValue,attValue:function attValue(event){return setNameValue(event.target.value);}}),/*#__PURE__*/_jsx(Dados,{title:\"CPF\",value:CPFValue,attValue:function attValue(event){return SetCPFValue(event.target.value);}}),/*#__PURE__*/_jsx(Botao,{onclick:finish,text:\"Reservar assento(s)\"}),/*#__PURE__*/_jsx(Rodape,{posterURL:lugaresDATA.movie.posterURL,movieTitle:lugaresDATA.movie.title,id:lugaresDATA.movie.id,weekday:lugaresDATA.day.weekday,showtime:lugaresDATA.name})]});}","map":{"version":3,"sources":["/home/guilherme/Projetos/projeto_09_cineflixReact/src/Lugares/Lugares.js"],"names":["axios","useState","useEffect","useParams","useNavigate","Rodape","Loading","Titulo","Cadeira","Infos","Dados","Botao","Lugares","setReservationData","lugaresDATA","setLugaresData","assentosId","get","then","response","data","catch","error","alert","navigate","nameValue","setNameValue","CPFValue","SetCPFValue","selectedSeats","setSelectedSeats","toggleSelect","seatId","newSelectedSeats","includes","splice","indexOf","push","finish","verifyInfo","ids","name","cpf","movie","title","date","day","showtime","undefined","seats","map","seat","i","isAvailable","id","event","target","value","posterURL","weekday"],"mappings":"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","sourcesContent":["import \"./styles.css\";\nimport axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport Rodape from \"../Outros/Rodape/Rodape\";\nimport Loading from \"../Outros/Loading/Loading\";\nimport Titulo from \"../Outros/Titulo/Titulo\";\nimport Cadeira from \"./Cadeira/Cadeira\";\nimport Infos from \"./Infos/Infos\";\nimport Dados from \"./Dados/Dados\";\nimport Botao from \"../Outros/Botao/Botao\";\n\nexport default function Lugares({ setReservationData }) {\n    const [lugaresDATA, setLugaresData] = useState(null);\n    const { assentosId } = useParams()\n    useEffect(() => {\n        axios.get(`https://mock-api.driven.com.br/api/v4/cineflex/showtimes/${assentosId}/seats`)\n            .then((response) => setLugaresData(response.data))\n            .catch((error) => alert(error))\n    }, [])\n    let navigate = useNavigate();\n    const [nameValue, setNameValue] = useState(\"\");\n    const [CPFValue, SetCPFValue] = useState(\"\");\n    const [selectedSeats, setSelectedSeats] = useState([]);\n    \n    function toggleSelect(seatId) {\n        let newSelectedSeats = [...selectedSeats];\n        if(newSelectedSeats.includes(seatId)){\n            newSelectedSeats.splice(newSelectedSeats.indexOf(seatId), 1);\n        }else{\n            newSelectedSeats.push(seatId);\n        }\n        setSelectedSeats(newSelectedSeats);\n    }\n    function finish() {\n        if(verifyInfo()){\n            setReservationData({\n                ids: selectedSeats,\n                name: nameValue,\n                cpf: CPFValue,\n                movie: lugaresDATA.movie.title,\n                date: lugaresDATA.day.date,\n                showtime: lugaresDATA.name\n            });\n            navigate.push(\"/sucesso\");\n        }\n    }\n    function verifyInfo() {\n        if (nameValue && CPFValue && selectedSeats[0] !== undefined) {\n            return true;\n        }\n        return false;\n    }\n    if (lugaresDATA === null) {\n        return (\n            <Loading />\n        )\n    }\n    return (\n        <article className=\"lugares\" >\n            <Titulo text=\"Selecione o(s) assento(s)\" />\n            <section className=\"seats-box\">\n                {lugaresDATA.seats.map((seat, i) => (\n                    <Cadeira\n                        number={seat.name}\n                        isAvailable={seat.isAvailable}\n                        key={seat.id}\n                        id={seat.id}\n                        toggleSelect={toggleSelect}\n                        isSelected={selectedSeats.includes(seat.id)}\n                    />))}\n                <Infos />\n            </section>\n            <Dados title=\"nome\" value={nameValue} attValue={(event) => setNameValue(event.target.value)} />\n            <Dados title=\"CPF\" value={CPFValue} attValue={(event) => SetCPFValue(event.target.value)} />\n            <Botao onclick={finish} text=\"Reservar assento(s)\" />\n            <Rodape\n                posterURL={lugaresDATA.movie.posterURL}\n                movieTitle={lugaresDATA.movie.title}\n                id={lugaresDATA.movie.id}\n                weekday={lugaresDATA.day.weekday}\n                showtime={lugaresDATA.name}\n            />\n        </article>\n    )\n}"]},"metadata":{},"sourceType":"module"}